<!DOCTYPE html>
<html lang="en-US">

<head itemscope="itemscope" itemtype="http://schema.org/WebSite">
<meta charset="UTF-8" />
<title>Low-Power Arduino Using the Watchdog Timer &#8211; Fiz-ix</title>
<meta name='robots' content='max-image-preview:large' />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="generator" content="Drop Shipping 1.0.5" />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Fiz-ix &raquo; Feed" href="https://fiz-ix.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Fiz-ix &raquo; Comments Feed" href="https://fiz-ix.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Fiz-ix &raquo; Low-Power Arduino Using the Watchdog Timer Comments Feed" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/feed/" />
<link rel="pingback" href="https://fiz-ix.com/xmlrpc.php" />
<link rel='stylesheet' id='hybrid-one-five-css'  href='https://fiz-ix.com/wp-content/themes/drop-shipping/library/css/one-five.min.css?ver=6.0' type='text/css' media='all' />
<link rel='stylesheet' id='hybrid-gallery-css'  href='https://fiz-ix.com/wp-content/themes/drop-shipping/library/css/gallery.min.css?ver=6.0' type='text/css' media='all' />
<link rel='stylesheet' id='hybrid-parent-css'  href='https://fiz-ix.com/wp-content/themes/drop-shipping/style.css?ver=6.0' type='text/css' media='all' />
<link rel='stylesheet' id='hybrid-style-css'  href='https://fiz-ix.com/wp-content/themes/drop-shipping-child/style.css?ver=6.0' type='text/css' media='all' />
<link rel='stylesheet' id='font-awesome-css'  href='https://fiz-ix.com/wp-content/themes/drop-shipping/css/font-awesome.css?ver=6.0' type='text/css' media='all' />
<link rel='stylesheet' id='wp-block-library-css'  href='https://fiz-ix.com/wp-includes/css/dist/block-library/style.min.css?ver=6.0' type='text/css' media='all' />
<style id='global-styles-inline-css' type='text/css'>
body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--duotone--dark-grayscale: url('#wp-duotone-dark-grayscale');--wp--preset--duotone--grayscale: url('#wp-duotone-grayscale');--wp--preset--duotone--purple-yellow: url('#wp-duotone-purple-yellow');--wp--preset--duotone--blue-red: url('#wp-duotone-blue-red');--wp--preset--duotone--midnight: url('#wp-duotone-midnight');--wp--preset--duotone--magenta-yellow: url('#wp-duotone-magenta-yellow');--wp--preset--duotone--purple-green: url('#wp-duotone-purple-green');--wp--preset--duotone--blue-orange: url('#wp-duotone-blue-orange');--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
</style>
<link rel='stylesheet' id='parent-style-css'  href='https://fiz-ix.com/wp-content/themes/drop-shipping/style.css?ver=6.0' type='text/css' media='all' />
<link rel='stylesheet' id='child-style-css'  href='https://fiz-ix.com/wp-content/themes/drop-shipping-child/style.css?ver=1.0' type='text/css' media='all' />
<script type='text/javascript' src='https://fiz-ix.com/wp-includes/js/jquery/jquery.min.js?ver=3.6.0' id='jquery-core-js'></script>
<script type='text/javascript' src='https://fiz-ix.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.3.2' id='jquery-migrate-js'></script>
<link rel="https://api.w.org/" href="https://fiz-ix.com/wp-json/" /><link rel="alternate" type="application/json" href="https://fiz-ix.com/wp-json/wp/v2/posts/541" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://fiz-ix.com/xmlrpc.php?rsd" />
<meta name="generator" content="WordPress 6.0" />
<link rel="canonical" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/" />
<link rel='shortlink' href='https://fiz-ix.com/?p=541' />
<link rel="alternate" type="application/json+oembed" href="https://fiz-ix.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.fiz-ix.com%2F2012%2F11%2Flow-power-arduino-using-the-watchdog-timer%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://fiz-ix.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.fiz-ix.com%2F2012%2F11%2Flow-power-arduino-using-the-watchdog-timer%2F&#038;format=xml" />
    <style type="text/css">
        #sidebar-primary ul li:before, a { color: #1e73be;}

         #searchnavi input, #top-bar { background: ; }
         h2.entry-title a:hover, #menu-primary li a:hover, li.current-menu-item > a, body.custom-header #site-title a:hover, a:hover { color: #81d742; }
       h2.entry-title a, #site-description, .sidebar, .credit { color: #1e73be; }
    </style>
    
<style type="text/css" id="custom-header-css">body.custom-header #site-title a { color: #000000; }</style>
<style type="text/css" id="custom-background-css">body.custom-background { background: #ffffff; }</style>


<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-6753741789275748",
    enable_page_level_ads: true
  });
</script>

</head>

<body class="wordpress ltr en en-us child-theme y2022 m06 d08 h18 wednesday logged-out custom-background custom-header display-header-text singular singular-post singular-post-541 post-format- layout-2c-l" dir="ltr" itemscope="itemscope" itemtype="http://schema.org/Blog">
	<div id="top-bar">
	<div id="top-container">
		<div id="searchnavi">
			<form role="search" method="get" id="searchform" class="searchform" action="https://fiz-ix.com/">
				<input type="text" placeholder="Search" value="" name="s" id="s" />
			
			</form>		</div>	
	

	<nav id="menu-secondary"></nav>
</div>
</div>
	<div id="container">

		<div class="skip-link">
			<a href="#content" class="screen-reader-text">Skip to content</a>
		</div><!-- .skip-link -->

		

		<header id="header" class="site-header" role="banner" itemscope="itemscope" itemtype="http://schema.org/WPHeader">

			
				<div id="branding" class="site-branding">
					<h1 id="site-title" class="site-title" itemprop="headline"><a href="https://fiz-ix.com" rel="home">Fiz-ix</a></h1>					<h2 id="site-description" class="site-description" itemprop="description">(Physics)</h2>				</div><!-- #branding -->

			
				<div id="header-widget">


		<section id="text-12" class="widget widget_text">			<div class="textwidget"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Fiz-ix Responsive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6753741789275748"
     data-ad-slot="8594677734"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
&nbsp;</div>
		</section>


</div>
		</header><!-- #header -->

		<nav id="main-menu">
	<nav class="menu menu-primary" role="navigation" id="menu-primary" aria-label="Primary Menu" itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement">

<nav id="menu-primary-title" class="menu-toggle">
			<button class="screen-reader-text"></button>
		</nav><!-- .menu-toggle -->

		<div class="wrap"><ul id="menu-primary-items" class="menu-items"><li id="menu-item-1531" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1531"><a href="https://fiz-ix.com">Home</a></li>
<li id="menu-item-1541" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-1541"><a href="#">Courses</a>
<ul class="sub-menu">
	<li id="menu-item-1540" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1540"><a href="https://fiz-ix.com/into-physics-algebra-based/">Introductory Physics (Algebra-Based)</a></li>
	<li id="menu-item-1544" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1544"><a href="https://fiz-ix.com/intro-physics-calculus-based/">Introductory Physics (Calculus-Based)</a></li>
</ul>
</li>
<li id="menu-item-1530" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1530"><a href="https://fiz-ix.com/about/">About</a></li>
<li id="menu-item-1532" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1532"><a href="https://fiz-ix.com/guides/">Guides</a></li>
<li id="menu-item-1533" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1533"><a href="https://fiz-ix.com/labs/">Labs</a></li>
<li id="menu-item-1534" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1534"><a href="https://fiz-ix.com/notebooks/">Notebooks</a></li>
</ul></div>
	</nav><!-- #menu-primary -->

		
		</nav>

				<div id="main-containter">
			<div id="breadcrumbs-container">
	<nav role="navigation" aria-label="Breadcrumbs" class="breadcrumb-trail breadcrumbs" itemprop="breadcrumb"><h2 class="trail-browse">You are here:</h2><ul class="trail-items" itemscope itemtype="http://schema.org/BreadcrumbList"><meta name="numberOfItems" content="4" /><meta name="itemListOrder" content="Ascending" /><li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem" class="trail-item trail-begin"><a href="https://fiz-ix.com" rel="home"><span itemprop="name">Home</span></a><meta itemprop="position" content="1" /></li><li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem" class="trail-item"><a href="https://fiz-ix.com/2012/"><span itemprop="name">2012</span></a><meta itemprop="position" content="2" /></li><li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem" class="trail-item"><a href="https://fiz-ix.com/2012/11/"><span itemprop="name">November</span></a><meta itemprop="position" content="3" /></li><li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem" class="trail-item trail-end"><span itemprop="name">Low-Power Arduino Using the Watchdog Timer</span><meta itemprop="position" content="4" /></li></ul></nav><div id="social"> 
		
		
		
		
		
				
		
	</div>
</div>
		<div id="main" class="main">

			


<main id="content" class="content" role="main">

	
	 

	
		
			
			
		
	<article id="post-541" class="entry author-jeff post-541 post type-post status-publish format-standard category-arduino category-electronics category-guides tag-arduino tag-electronics tag-guides" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
		
		<header class="entry-header">

			<time class="entry-published updated" datetime="2012-Nov-17T22:28:22-05:00" itemprop="datePublished" title="Saturday, Nov 17, 2012, 10:28 pm">November 17, 2012</time>
			by			<span class="entry-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><a href="https://fiz-ix.com/author/jeff/" title="Posts by Jeff" rel="author" class="url fn n" itemprop="url"><span itemprop="name">Jeff</span></a></span>
			<h1 class="entry-title" itemprop="headline">Low-Power Arduino Using the Watchdog Timer</h1>
			

			<div class="entry-byline">
				
			</div><!-- .entry-byline -->

		</header><!-- .entry-header -->

		<div class="entry-content" itemprop="articleBody">
			<p>A project I am working on requires temperature data to be sent periodically (about every 5 minutes) from a sensor node to a data logger using an XBee radio. The project requires the sensor to operate using battery power for two weeks. To conserve power, I built a 3.3 V breadboard Arduino with a efficient switching DC to DC voltage regulator and put both the XBee and the ATmega328 to sleep most of the time. This post shows code to use the ATmega328 watchdog timer to keep the Arduino asleep most of the time only waking periodically to perform short tasks like read ing and sending temperature data.</p>
<pre><code>#include &lt;avr/sleep.h&gt;
// This library contains functions to set various low-power 
// states for the ATmega328

// This variable is made volatile because it is changed inside
// an interrupt function
volatile int sleep_count = 0; // Keep track of how many sleep
// cycles have been completed.
const int interval = 5; // Interval in minutes between waking
// and doing tasks.
const int sleep_total = (interval*60)/8; // Approximate number 
// of sleep cycles needed before the interval defined above 
// elapses. Not that this does integer math.

void setup(void) {
watchdogOn(); // Turn on the watch dog timer.

// The following saves some extra power by disabling some 
// peripherals I am not using.

// Disable the ADC by setting the ADEN bit (bit 7) to zero.
ADCSRA = ADCSRA & B01111111;

// Disable the analog comparator by setting the ACD bit
// (bit 7) to one.
ACSR = B10000000;

// Disable digital input buffers on all analog input pins
// by setting bits 0-5 to one.
DIDR0 = DIDR0 | B00111111;
}

void loop(void) {
goToSleep(); // ATmega328 goes to sleep for about 8 seconds
// and continues to execute code when it wakes up

if (sleep_count == sleep_total) {

// CODE TO BE EXECUTED PERIODICALLY

}

}

void goToSleep()   
{
// The ATmega328 has five different sleep states.
// See the ATmega 328 datasheet for more information.
// SLEEP_MODE_IDLE -the least power savings 
// SLEEP_MODE_ADC
// SLEEP_MODE_PWR_SAVE
// SLEEP_MODE_STANDBY
// SLEEP_MODE_PWR_DOWN -the most power savings
// I am using the deepest sleep mode from which a
// watchdog timer interrupt can wake the ATMega328

set_sleep_mode(SLEEP_MODE_PWR_DOWN); // Set sleep mode.
sleep_enable(); // Enable sleep mode.
sleep_mode(); // Enter sleep mode.
// After waking from watchdog interrupt the code continues
// to execute from this point.

sleep_disable(); // Disable sleep mode after waking.
                     
}

void watchdogOn() {
  
// Clear the reset flag, the WDRF bit (bit 3) of MCUSR.
MCUSR = MCUSR & B11110111;
  
// Set the WDCE bit (bit 4) and the WDE bit (bit 3) 
// of WDTCSR. The WDCE bit must be set in order to 
// change WDE or the watchdog prescalers. Setting the 
// WDCE bit will allow updtaes to the prescalers and 
// WDE for 4 clock cycles then it will be reset by 
// hardware.
WDTCSR = WDTCSR | B00011000; 

// Set the watchdog timeout prescaler value to 1024 K 
// which will yeild a time-out interval of about 8.0 s.
WDTCSR = B00100001;

// Enable the watchdog timer interupt.
WDTCSR = WDTCSR | B01000000;
MCUSR = MCUSR & B11110111;

}

ISR(WDT_vect)
{
sleep_count ++; // keep track of how many sleep cycles
// have been completed.
}

</code></pre>
					</div><!-- .entry-content -->

		<footer class="entry-footer">				
					
				<br /><span class="entry-terms category" itemprop="articleSection">Categories:	 <a href="https://fiz-ix.com/category/guides/electronics/arduino/" rel="tag">Arduino</a> <a href="https://fiz-ix.com/category/guides/electronics/" rel="tag">Electronics</a> <a href="https://fiz-ix.com/category/guides/" rel="tag">Guides</a></span>			<br /><span class="entry-terms post_tag" itemprop="keywords">Taggs:	 <a href="https://fiz-ix.com/tag/arduino/" rel="tag">Arduino</a> <a href="https://fiz-ix.com/tag/electronics/" rel="tag">Electronics</a> <a href="https://fiz-ix.com/tag/guides/" rel="tag">Guides</a></span>		</footer><!-- .entry-footer -->
	</article>	
	
	
</article><!-- .entry -->

						
	<div class="loop-nav">
		<div class="prev">Previous Post: <a href="https://fiz-ix.com/2012/11/measuring-signal-frequency-with-arduino/" rel="prev">Measuring Signal Frequency with Arduino</a></div>		<div class="next">Next Post: <a href="https://fiz-ix.com/2012/11/low-power-xbee-sleep-mode-with-arduino-and-pin-hibernation/" rel="next">Low-Power XBee Sleep Mode with Arduino and Pin Hibernation</a></div>	</div><!-- .loop-nav -->


			
<section id="comments-template">

	
		<div id="comments">

			<h3 id="comments-number">30 Comments</h3>

			<ol class="comment-list">
				<li id="comment-1280" class="comment even thread-even depth-1 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://2.gravatar.com/avatar/88ebe177a7b43bbdb27846005734b0cb?s=50&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/88ebe177a7b43bbdb27846005734b0cb?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Patrick</cite><br />
			<time class="comment-published" datetime="2013-02-10T15:05:44-05:00" title="Sunday, February 10, 2013, 3:05 pm" itemprop="datePublished">9 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-1280" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=1280#respond' data-commentid="1280" data-postid="541" data-belowelement="comment-1280" data-respondelement="respond" data-replyto="Reply to Patrick" aria-label='Reply to Patrick'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>Thanks for the great overview. I got it to work for my project and this was a big help. A couple things you might want to change are that the function called in the loop is goToSleep, while the one you define is sleepNow. I also had better success by changing &#8216;if (sleep_count == sleep_total)&#8217; to &#8216;if (sleep_count &gt; sleep_total)&#8217; since for mysterious reasons sometimes the sleep_count would jump higher than the total so the loop wouldn&#8217;t exit. Lastly, you clear the MCUSR twice in watchdogOn(), is there a reason for this? Don&#8217;t mean to be nit picky, overall this works well.</p>
		</div><!-- .comment-content -->

		
	</article>

<ol class="children">
<li id="comment-1282" class="comment byuser comment-author-jeff bypostauthor odd alt depth-2 role-administrator has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://1.gravatar.com/avatar/a71e0e0bb81699c0238b73736b2b970e?s=50&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/a71e0e0bb81699c0238b73736b2b970e?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Jeff</cite><br />
			<time class="comment-published" datetime="2013-02-10T19:42:13-05:00" title="Sunday, February 10, 2013, 7:42 pm" itemprop="datePublished">9 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-1282" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=1282#respond' data-commentid="1282" data-postid="541" data-belowelement="comment-1282" data-respondelement="respond" data-replyto="Reply to Jeff" aria-label='Reply to Jeff'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>I am glad you found the post useful. Thanks for pointing out the &#8220;goToSleep()&#8221; typo. I have fixed it. It is strange that you had trouble with (sleep_count==sleep_total). I have been using code like this in a project that has been operating continuously for over three months and never found the MCU to hang. Nevertheless, using (sleep_count > sleep_total) is a good way to be safe. As for the second time I clear the MCUSR flag, I seem to remember reading in the ATmega328 datasheet that turning on the interrupt could accidentally set this flag. I could be remembering incorrectly but I think I put this in there to be safe. Thanks for the feedback.</p>
		</div><!-- .comment-content -->

		
	</article>

<ol class="children">
<li id="comment-1472" class="comment even depth-3 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://0.gravatar.com/avatar/051aef0b134d861783203b210a970f99?s=50&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/051aef0b134d861783203b210a970f99?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">riju</cite><br />
			<time class="comment-published" datetime="2013-09-16T00:51:05-04:00" title="Monday, September 16, 2013, 12:51 am" itemprop="datePublished">9 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-1472" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=1472#respond' data-commentid="1472" data-postid="541" data-belowelement="comment-1472" data-respondelement="respond" data-replyto="Reply to riju" aria-label='Reply to riju'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>your post was really useful..my project requires ADC.and i will be using ADC pins.so if i disable ADC mode..would dat mean i wont be able to use ADC&#8230;.</p>
		</div><!-- .comment-content -->

		
	</article>

</li><!-- .comment --><li id="comment-1540" class="comment odd alt depth-3 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://2.gravatar.com/avatar/bd3714b8a1ecdc5ccb1dde4984f51854?s=50&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/bd3714b8a1ecdc5ccb1dde4984f51854?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Pat</cite><br />
			<time class="comment-published" datetime="2014-05-15T13:42:10-04:00" title="Thursday, May 15, 2014, 1:42 pm" itemprop="datePublished">8 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-1540" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=1540#respond' data-commentid="1540" data-postid="541" data-belowelement="comment-1540" data-respondelement="respond" data-replyto="Reply to Pat" aria-label='Reply to Pat'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>I&#8217;ve been looking for some code to help me understand watchdogs for a while now, and have to say yours did the trick. </p>
<p>I also had a problem with the hanging from the loop. I instead reset the counter every time it went through the assigned interval number:</p>
<p>void loop(void) {<br />
goToSleep(); // ATmega328 goes to sleep for about 8 seconds<br />
if (sleep_count == sleep_total) {</p>
<p>  // CODE TO BE EXECUTED PERIODICALLY<br />
  sleep_count = 0;</p>
<p>etc, etc, etc</p>
<p>Thanks a bunch!</p>
		</div><!-- .comment-content -->

		
	</article>

</li><!-- .comment --></ol><!-- .children -->
</li><!-- .comment --></ol><!-- .children -->
</li><!-- .comment --><li id="comment-1427" class="comment even thread-odd thread-alt depth-1 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://2.gravatar.com/avatar/b810829254435cd6af7aa7dceccc7bf4?s=50&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/b810829254435cd6af7aa7dceccc7bf4?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><a href='http://www.djynet.net' rel='external nofollow ugc' class='url fn n' itemprop="url"><span itemprop="name">Charles</span></a></cite><br />
			<time class="comment-published" datetime="2013-05-09T03:06:32-04:00" title="Thursday, May 9, 2013, 3:06 am" itemprop="datePublished">9 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-1427" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=1427#respond' data-commentid="1427" data-postid="541" data-belowelement="comment-1427" data-respondelement="respond" data-replyto="Reply to Charles" aria-label='Reply to Charles'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>Thx a lot !!!<br />
Exactly what I was looking for. It will save me lot of time.<br />
Cheers</p>
		</div><!-- .comment-content -->

		
	</article>

</li><!-- .comment --><li id="comment-1428" class="comment odd alt thread-even depth-1 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://0.gravatar.com/avatar/f150abd5967810c4f00ab216ea083445?s=50&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/f150abd5967810c4f00ab216ea083445?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Michael</cite><br />
			<time class="comment-published" datetime="2013-05-09T09:25:01-04:00" title="Thursday, May 9, 2013, 9:25 am" itemprop="datePublished">9 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-1428" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=1428#respond' data-commentid="1428" data-postid="541" data-belowelement="comment-1428" data-respondelement="respond" data-replyto="Reply to Michael" aria-label='Reply to Michael'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>Thank you for this example. I don&#8217;t know why, but in my  circuit, the sleep time is only 4 seconds (not 8 seconds). Although, I tried it in the same way as you. Maybe, you can give some hints?</p>
<p>Curcuit:<br />
[atmega328p, 16Mhz, 3.3V, Bootloader(Arduino)]</p>
<p>Best regards from germany</p>
		</div><!-- .comment-content -->

		
	</article>

<ol class="children">
<li id="comment-1435" class="comment byuser comment-author-jeff bypostauthor even depth-2 role-administrator has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://1.gravatar.com/avatar/a71e0e0bb81699c0238b73736b2b970e?s=50&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/a71e0e0bb81699c0238b73736b2b970e?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Jeff</cite><br />
			<time class="comment-published" datetime="2013-05-15T09:54:25-04:00" title="Wednesday, May 15, 2013, 9:54 am" itemprop="datePublished">9 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-1435" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=1435#respond' data-commentid="1435" data-postid="541" data-belowelement="comment-1435" data-respondelement="respond" data-replyto="Reply to Jeff" aria-label='Reply to Jeff'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>The eight second sleep time is an approximation. The watchdog timer continues running in the background even after the MCU wakes up so if you do four seconds of work then go back to sleep the MCU will only stay asleep for about four more seconds before the watchdog timer times out and wakes the MCU up again. Maybe this is what is happening.</p>
		</div><!-- .comment-content -->

		
	</article>

</li><!-- .comment --></ol><!-- .children -->
</li><!-- .comment --><li id="comment-1429" class="pingback odd alt thread-odd thread-alt depth-1 ping">

	<header class="comment-meta">
		<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Test carte Rocket scream Mini Ultra + | Djynet</cite><br />
		<time class="comment-published" datetime="2013-05-09T13:20:28-04:00" title="Thursday, May 9, 2013, 1:20 pm" itemprop="datePublished">9 years ago</time>
		<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-1429" itemprop="url">Permalink</a>
			</header><!-- .comment-meta -->

</li><!-- .comment --><li id="comment-1440" class="comment even thread-even depth-1 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://1.gravatar.com/avatar/109000b0c7fa23d450a617aa32a70055?s=50&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/109000b0c7fa23d450a617aa32a70055?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">kiwi</cite><br />
			<time class="comment-published" datetime="2013-05-30T17:19:13-04:00" title="Thursday, May 30, 2013, 5:19 pm" itemprop="datePublished">9 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-1440" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=1440#respond' data-commentid="1440" data-postid="541" data-belowelement="comment-1440" data-respondelement="respond" data-replyto="Reply to kiwi" aria-label='Reply to kiwi'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>Hi, Does it work with arduino uno?</p>
		</div><!-- .comment-content -->

		
	</article>

<ol class="children">
<li id="comment-1446" class="comment byuser comment-author-jeff bypostauthor odd alt depth-2 role-administrator has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://1.gravatar.com/avatar/a71e0e0bb81699c0238b73736b2b970e?s=50&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/a71e0e0bb81699c0238b73736b2b970e?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Jeff</cite><br />
			<time class="comment-published" datetime="2013-06-06T08:59:55-04:00" title="Thursday, June 6, 2013, 8:59 am" itemprop="datePublished">9 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-1446" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=1446#respond' data-commentid="1446" data-postid="541" data-belowelement="comment-1446" data-respondelement="respond" data-replyto="Reply to Jeff" aria-label='Reply to Jeff'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>Yes. I mostly use Uno. This code is written for Uno.</p>
		</div><!-- .comment-content -->

		
	</article>

</li><!-- .comment --></ol><!-- .children -->
</li><!-- .comment --><li id="comment-1441" class="comment even thread-odd thread-alt depth-1 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://1.gravatar.com/avatar/109000b0c7fa23d450a617aa32a70055?s=50&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/109000b0c7fa23d450a617aa32a70055?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">kiwi</cite><br />
			<time class="comment-published" datetime="2013-05-30T18:12:38-04:00" title="Thursday, May 30, 2013, 6:12 pm" itemprop="datePublished">9 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-1441" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=1441#respond' data-commentid="1441" data-postid="541" data-belowelement="comment-1441" data-respondelement="respond" data-replyto="Reply to kiwi" aria-label='Reply to kiwi'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>I just tried this on 2 Arduino Leonardos (wrong chips) and they&#8217;ve both gone caput. After the bootloader has loaded the board can no longer be recognized (checked in device manager). Any idea?</p>
		</div><!-- .comment-content -->

		
	</article>

<ol class="children">
<li id="comment-1447" class="comment byuser comment-author-jeff bypostauthor odd alt depth-2 role-administrator has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://1.gravatar.com/avatar/a71e0e0bb81699c0238b73736b2b970e?s=50&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/a71e0e0bb81699c0238b73736b2b970e?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Jeff</cite><br />
			<time class="comment-published" datetime="2013-06-06T09:07:33-04:00" title="Thursday, June 6, 2013, 9:07 am" itemprop="datePublished">9 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-1447" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=1447#respond' data-commentid="1447" data-postid="541" data-belowelement="comment-1447" data-respondelement="respond" data-replyto="Reply to Jeff" aria-label='Reply to Jeff'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>Wow, this is surprising. The ATmega32U4 on the Leonardo also has a programmable watchdog timer. I wouldn&#8217;t expect the program to brick the MCU. You may have to reload the bootloader using an AVR programmer. There are several resources (programmers and tutorials) on how to do this on sparkfun.com. I have bricked Unos a lot. I use the AVRISP MKII programmer by Atmel. Good luck.</p>
		</div><!-- .comment-content -->

		
	</article>

</li><!-- .comment --><li id="comment-1469" class="comment even depth-2 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://2.gravatar.com/avatar/b6c8217adc70eb85d5a9ee4988d4cfd6?s=50&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/b6c8217adc70eb85d5a9ee4988d4cfd6?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Jan Willem</cite><br />
			<time class="comment-published" datetime="2013-08-06T05:54:00-04:00" title="Tuesday, August 6, 2013, 5:54 am" itemprop="datePublished">9 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-1469" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=1469#respond' data-commentid="1469" data-postid="541" data-belowelement="comment-1469" data-respondelement="respond" data-replyto="Reply to Jan Willem" aria-label='Reply to Jan Willem'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>I tried the same with same results üôÅ<br />
Board seems bricked.</p>
<p>Problem with the Leonardo is that when it enters sleep mode, it loses the USB connection and it doesn&#8217;t come back. If you have bricked the board, the way to unbrick it is load another sketch (like the blink sketch). I haven&#8217;t managed to  fix this on the Windows IDE, but on a Mac or Linux it works as follows: plug in the bricked leonardo board and slect the correct serial port (it will briefly appear in the list and then disappear), compile the sketch and upload. When  the message Uploading&#8230; apperas press the reste button on the Leonardo and the sketch will upload and the board will be un-bricked.</p>
		</div><!-- .comment-content -->

		
	</article>

<ol class="children">
<li id="comment-1662" class="comment odd alt depth-3 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://0.gravatar.com/avatar/c5c03aa1d93f811406bcca1305af1459?s=50&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/c5c03aa1d93f811406bcca1305af1459?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><a href='http://makersconfidential.blogspot.com' rel='external nofollow ugc' class='url fn n' itemprop="url"><span itemprop="name">Nick Alexeev</span></a></cite><br />
			<time class="comment-published" datetime="2015-06-30T02:43:30-04:00" title="Tuesday, June 30, 2015, 2:43 am" itemprop="datePublished">7 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-1662" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=1662#respond' data-commentid="1662" data-postid="541" data-belowelement="comment-1662" data-respondelement="respond" data-replyto="Reply to Nick Alexeev" aria-label='Reply to Nick Alexeev'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>I too did the same with Arduino LilyPad USB and got the same results.  The last sketch runs, but I couldn&#8217;t download a new sketch through USB.  I was able to un-brick it by re-burning the Arduino LilyPad USB bootloader (through the SPI, using another Arduino).</p>
		</div><!-- .comment-content -->

		
	</article>

</li><!-- .comment --></ol><!-- .children -->
</li><!-- .comment --></ol><!-- .children -->
</li><!-- .comment --><li id="comment-1520" class="comment even thread-even depth-1 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://1.gravatar.com/avatar/762fed10b2d0b6a694d4562623f51c2b?s=50&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/762fed10b2d0b6a694d4562623f51c2b?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">joshua</cite><br />
			<time class="comment-published" datetime="2014-03-17T19:12:07-04:00" title="Monday, March 17, 2014, 7:12 pm" itemprop="datePublished">8 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-1520" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=1520#respond' data-commentid="1520" data-postid="541" data-belowelement="comment-1520" data-respondelement="respond" data-replyto="Reply to joshua" aria-label='Reply to joshua'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>Hey Jeff.<br />
I noticed you disable the ADC (analog digital converter) in the setup of your sketch with this code:<br />
***<br />
// Disable the ADC by setting the ADEN bit (bit 7) to zero.<br />
ADCSRA = ADCSRA &amp; B01111111;<br />
***<br />
this seems to work as well:<br />
***<br />
ADCSRA = 0;<br />
***</p>
<p>A few noobish questions if you don&#8217;t mind me asking:</p>
<p>1. Since you disabled ADC in setup(), does that mean you would not be able to take any analog readings throughout the rest of your code?</p>
<p>&#8211; My project uses an analog temp sensor. Therefore I need to be able to take analog readings when the MCU is awake. So I imagine disabling ADC in setup() wouldn&#8217;t work for me. However:</p>
<p>2a. Could I instead: disable ADC within the loop, just before MCU sleeps, and then enable ADC just after MCU awakes?</p>
<p>2b. Would that allow me to take analog readings when MCU is awake, but still save ~100uA by having ADC disabled when the MCU is sleeping?</p>
<p>3. How would I go about &#8220;enabling&#8221; ADC?<br />
&#8211; my guess would be:<br />
***<br />
ADCSRA = 1;<br />
***</p>
<p>4. I noticed I could save ~20 uA by turning off BOD (brown-out disable) before sleeping. I was wondering if there is anything wrong with doing so, and if I should be turning BOD back on after waking?</p>
<p>***<br />
// turn off BOD in software</p>
<p>MCUCR = bit (BODS) | bit (BODSE);  // turn on brown-out enable select</p>
<p>MCUCR = bit (BODS);        // this must be done within 4 clock cycles of above<br />
***</p>
<p>Thanks Jeff.</p>
		</div><!-- .comment-content -->

		
	</article>

</li><!-- .comment --><li id="comment-1531" class="comment odd alt thread-odd thread-alt depth-1 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://1.gravatar.com/avatar/762fed10b2d0b6a694d4562623f51c2b?s=50&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/762fed10b2d0b6a694d4562623f51c2b?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Joshua Tulberg</cite><br />
			<time class="comment-published" datetime="2014-05-09T16:32:12-04:00" title="Friday, May 9, 2014, 4:32 pm" itemprop="datePublished">8 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-1531" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=1531#respond' data-commentid="1531" data-postid="541" data-belowelement="comment-1531" data-respondelement="respond" data-replyto="Reply to Joshua Tulberg" aria-label='Reply to Joshua Tulberg'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>hey Jeff.</p>
<p>I was just wondering how I could disable the ADC only for sleep, but have it function after waking-up.</p>
<p>I tried a few different things, like putting:</p>
<p>// Disable the ADC by setting the ADEN bit (bit 7) to zero.<br />
ADCSRA = ADCSRA &amp; B01111111;</p>
<p>just before my sleep function, and then putting:</p>
<p>// Enable the ADC by setting the ADEN bit (bit 7) to one.<br />
ADCSRA = ADCSRA &amp; B11111111;</p>
<p>just after my sleep function.<br />
*Note: I just guessed that this is how you enable ADC since its the inverse of how you disabled it.</p>
<p>anyhow, the analog readings I get after this section of my code are whacko. So something is happening after disabling and then enabling the ADC that is causing whacko analog readings.</p>
<p>If I leave ADC alone (never disable it) then I can sleep and take non-whacko analog readings all day long. But I would like to disable ADC while sleeping to save more power.</p>
<p>please advise.<br />
Thanks.</p>
		</div><!-- .comment-content -->

		
	</article>

</li><!-- .comment --><li id="comment-1645" class="comment even thread-even depth-1 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://1.gravatar.com/avatar/1e2732a5a9b9b2fc38168b30971b59a3?s=50&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/1e2732a5a9b9b2fc38168b30971b59a3?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Roy D</cite><br />
			<time class="comment-published" datetime="2015-03-15T12:26:22-04:00" title="Sunday, March 15, 2015, 12:26 pm" itemprop="datePublished">7 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-1645" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=1645#respond' data-commentid="1645" data-postid="541" data-belowelement="comment-1645" data-respondelement="respond" data-replyto="Reply to Roy D" aria-label='Reply to Roy D'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>Thank you so much for this excellent sketch. I have also lost a couple of sparkfun pro micro&#8217;s while exploring the sleep function. Through the school of hard knocks I have become rather proficient at restoring them to working condition. Again, your code is awesome.</p>
		</div><!-- .comment-content -->

		
	</article>

</li><!-- .comment --><li id="comment-1659" class="pingback odd alt thread-odd thread-alt depth-1 ping">

	<header class="comment-meta">
		<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><a href='http://dluat.com/very-long-delay-possible/' rel='external nofollow ugc' class='url fn n' itemprop="url"><span itemprop="name">Very long delay() possible? | DL-UAT</span></a></cite><br />
		<time class="comment-published" datetime="2015-05-19T23:10:17-04:00" title="Tuesday, May 19, 2015, 11:10 pm" itemprop="datePublished">7 years ago</time>
		<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-1659" itemprop="url">Permalink</a>
			</header><!-- .comment-meta -->

</li><!-- .comment --><li id="comment-1704" class="comment even thread-even depth-1 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://0.gravatar.com/avatar/fc6d9a0c339452821c0443bee63fa34e?s=50&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/fc6d9a0c339452821c0443bee63fa34e?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Tadas</cite><br />
			<time class="comment-published" datetime="2016-06-17T08:49:46-04:00" title="Friday, June 17, 2016, 8:49 am" itemprop="datePublished">6 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-1704" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=1704#respond' data-commentid="1704" data-postid="541" data-belowelement="comment-1704" data-respondelement="respond" data-replyto="Reply to Tadas" aria-label='Reply to Tadas'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>Hello,<br />
your code is not performing as it should unless you clear the flag  sleep_count=0;</p>
		</div><!-- .comment-content -->

		
	</article>

</li><!-- .comment --><li id="comment-3586" class="comment odd alt thread-odd thread-alt depth-1 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://2.gravatar.com/avatar/52147a92c92005d97f09c00ca54c4316?s=50&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/52147a92c92005d97f09c00ca54c4316?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Gajendra</cite><br />
			<time class="comment-published" datetime="2016-11-14T02:12:50-05:00" title="Monday, November 14, 2016, 2:12 am" itemprop="datePublished">6 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-3586" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=3586#respond' data-commentid="3586" data-postid="541" data-belowelement="comment-3586" data-respondelement="respond" data-replyto="Reply to Gajendra" aria-label='Reply to Gajendra'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>Hello,<br />
I want Atemaga 328 to sleep for almost 20Hr and then wake up automatically to perform a specific function. Is it possible to make AT3328 controller sleep for 20 Hour without using external hardware interrupt?? If to use external hardware what will be much suitable?</p>
		</div><!-- .comment-content -->

		
	</article>

<ol class="children">
<li id="comment-3594" class="comment byuser comment-author-jeff bypostauthor even depth-2 role-administrator has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://1.gravatar.com/avatar/a71e0e0bb81699c0238b73736b2b970e?s=50&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/a71e0e0bb81699c0238b73736b2b970e?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Jeff</cite><br />
			<time class="comment-published" datetime="2016-11-14T09:08:47-05:00" title="Monday, November 14, 2016, 9:08 am" itemprop="datePublished">6 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-3594" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=3594#respond' data-commentid="3594" data-postid="541" data-belowelement="comment-3594" data-respondelement="respond" data-replyto="Reply to Jeff" aria-label='Reply to Jeff'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>Yes, you can do this. Well, effectively. If memory serves the watchdog timer has an overflow about every 8 seconds. At that point the MCU would wake but you can just put it immediately back to sleep until the desired time has elapsed.</p>
		</div><!-- .comment-content -->

		
	</article>

</li><!-- .comment --></ol><!-- .children -->
</li><!-- .comment --><li id="comment-3607" class="comment odd alt thread-even depth-1 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://2.gravatar.com/avatar/52147a92c92005d97f09c00ca54c4316?s=50&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/52147a92c92005d97f09c00ca54c4316?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Gajendra</cite><br />
			<time class="comment-published" datetime="2016-11-14T23:20:23-05:00" title="Monday, November 14, 2016, 11:20 pm" itemprop="datePublished">6 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-3607" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=3607#respond' data-commentid="3607" data-postid="541" data-belowelement="comment-3607" data-respondelement="respond" data-replyto="Reply to Gajendra" aria-label='Reply to Gajendra'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>Thanks JEFF,<br />
If I want to use external hardware to sleep controller 20 hour sleep which component would be efficient in  terms of power saving??</p>
		</div><!-- .comment-content -->

		
	</article>

<ol class="children">
<li id="comment-3714" class="comment byuser comment-author-jeff bypostauthor even depth-2 role-administrator has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://1.gravatar.com/avatar/a71e0e0bb81699c0238b73736b2b970e?s=50&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/a71e0e0bb81699c0238b73736b2b970e?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Jeff</cite><br />
			<time class="comment-published" datetime="2016-11-18T12:27:39-05:00" title="Friday, November 18, 2016, 12:27 pm" itemprop="datePublished">6 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-3714" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=3714#respond' data-commentid="3714" data-postid="541" data-belowelement="comment-3714" data-respondelement="respond" data-replyto="Reply to Jeff" aria-label='Reply to Jeff'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>Gajendra,</p>
<p>Don&#8217;t know. I would just use the Atmel&#8217;s low power states. Keep in mind that when the Atmel MCU is in its low power state it uses very little energy. Even though it wakes up every eight-ish seconds, if it immediately goes back to sleep it uses very little energy. It may only be awake for a hundred microseconds or less. That means over an eight second period it is only awake for 0.001% of the time.</p>
		</div><!-- .comment-content -->

		
	</article>

</li><!-- .comment --></ol><!-- .children -->
</li><!-- .comment --><li id="comment-4179" class="comment odd alt thread-odd thread-alt depth-1 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://0.gravatar.com/avatar/cb9d5e60e5eef5cce38f5e6cf8725ad0?s=50&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/cb9d5e60e5eef5cce38f5e6cf8725ad0?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">sonasec</cite><br />
			<time class="comment-published" datetime="2016-12-19T09:22:59-05:00" title="Monday, December 19, 2016, 9:22 am" itemprop="datePublished">5 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-4179" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=4179#respond' data-commentid="4179" data-postid="541" data-belowelement="comment-4179" data-respondelement="respond" data-replyto="Reply to sonasec" aria-label='Reply to sonasec'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>thank you very much , if i want my arduino to sleep 2hours and enable PIN about 10s &#8230;etc (loop); and when int0 becomes  arduino must do Routine Interupt , what i do this.</p>
		</div><!-- .comment-content -->

		
	</article>

<ol class="children">
<li id="comment-4568" class="comment byuser comment-author-jeff bypostauthor even depth-2 role-administrator has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://1.gravatar.com/avatar/a71e0e0bb81699c0238b73736b2b970e?s=50&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/a71e0e0bb81699c0238b73736b2b970e?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Jeff</cite><br />
			<time class="comment-published" datetime="2017-01-09T15:37:19-05:00" title="Monday, January 9, 2017, 3:37 pm" itemprop="datePublished">5 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-4568" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=4568#respond' data-commentid="4568" data-postid="541" data-belowelement="comment-4568" data-respondelement="respond" data-replyto="Reply to Jeff" aria-label='Reply to Jeff'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>@sonasec<br />
&#8211; keep track of the number of interrupts in the ISR(WDT_vect) and when approximately 900 have occured (8 seconds each x 900 = two hours) wake the MCU, otherwise, put it back to sleep.</p>
		</div><!-- .comment-content -->

		
	</article>

</li><!-- .comment --></ol><!-- .children -->
</li><!-- .comment --><li id="comment-4221" class="comment odd alt thread-even depth-1 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://2.gravatar.com/avatar/59775166e4c99d2e1858fe0850f8354a?s=50&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/59775166e4c99d2e1858fe0850f8354a?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Syafei</cite><br />
			<time class="comment-published" datetime="2016-12-23T15:14:58-05:00" title="Friday, December 23, 2016, 3:14 pm" itemprop="datePublished">5 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-4221" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=4221#respond' data-commentid="4221" data-postid="541" data-belowelement="comment-4221" data-respondelement="respond" data-replyto="Reply to Syafei" aria-label='Reply to Syafei'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>Hey, thanks for the post.<br />
i tried the code exactly like yours, but oddly, my arduino (nano) only the data on the 1st 5 minutes, after that it didnt send data anymore.</p>
		</div><!-- .comment-content -->

		
	</article>

</li><!-- .comment --><li id="comment-4222" class="comment even thread-odd thread-alt depth-1 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://2.gravatar.com/avatar/59775166e4c99d2e1858fe0850f8354a?s=50&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/59775166e4c99d2e1858fe0850f8354a?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Syafei</cite><br />
			<time class="comment-published" datetime="2016-12-23T15:18:29-05:00" title="Friday, December 23, 2016, 3:18 pm" itemprop="datePublished">5 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-4222" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=4222#respond' data-commentid="4222" data-postid="541" data-belowelement="comment-4222" data-respondelement="respond" data-replyto="Reply to Syafei" aria-label='Reply to Syafei'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>Hey, thanks for the post.<br />
i tried the code exactly like yours, but oddly, my arduino (nano) only the data on the 1st 5 minutes, after that it didnt send data anymore. is there something i could do about it?<br />
i have an arduino nano with nrf24l01 to send temperature and accelerometer data for every 5 minutes. i use your sketch, it works at the first time, but only that. after it send the data at the first 5  minutes, my arduino didnt send the data anymore.</p>
		</div><!-- .comment-content -->

		
	</article>

</li><!-- .comment --><li id="comment-4223" class="comment odd alt thread-even depth-1 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://2.gravatar.com/avatar/59775166e4c99d2e1858fe0850f8354a?s=50&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/59775166e4c99d2e1858fe0850f8354a?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Syafei</cite><br />
			<time class="comment-published" datetime="2016-12-23T15:18:56-05:00" title="Friday, December 23, 2016, 3:18 pm" itemprop="datePublished">5 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-4223" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=4223#respond' data-commentid="4223" data-postid="541" data-belowelement="comment-4223" data-respondelement="respond" data-replyto="Reply to Syafei" aria-label='Reply to Syafei'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>is there something i could do about it?<br />
i have an arduino nano with nrf24l01 to send temperature and accelerometer data for every 5 minutes. i use your sketch, it works at the first time, but only that. after it send the data at the first 5  minutes, my arduino didnt send the data anymore.</p>
		</div><!-- .comment-content -->

		
	</article>

<ol class="children">
<li id="comment-4569" class="comment byuser comment-author-jeff bypostauthor even depth-2 role-administrator has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://1.gravatar.com/avatar/a71e0e0bb81699c0238b73736b2b970e?s=50&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/a71e0e0bb81699c0238b73736b2b970e?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Jeff</cite><br />
			<time class="comment-published" datetime="2017-01-09T15:39:56-05:00" title="Monday, January 9, 2017, 3:39 pm" itemprop="datePublished">5 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-4569" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=4569#respond' data-commentid="4569" data-postid="541" data-belowelement="comment-4569" data-respondelement="respond" data-replyto="Reply to Jeff" aria-label='Reply to Jeff'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>@ Syafei<br />
&#8211; can&#8217;t offer much advice without seeing your code. You might be having a data type issue. Are you storing the number of interrupts in a BYTE? if so then you may be overflowing the variable after about five minutes. Use an INT or UNSIGNED INT instead.</p>
		</div><!-- .comment-content -->

		
	</article>

</li><!-- .comment --></ol><!-- .children -->
</li><!-- .comment --><li id="comment-35378" class="comment odd alt thread-odd thread-alt depth-1 has-avatar" itemprop="comment" itemscope="itemscope" itemtype="http://schema.org/Comment">

	<article>

		<header class="comment-meta">
			<img alt='' src='http://1.gravatar.com/avatar/af6e05ff054d70982ed6a7a63d70b6e1?s=50&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/af6e05ff054d70982ed6a7a63d70b6e1?s=100&#038;d=mm&#038;r=g 2x' class='avatar avatar-50 photo' height='50' width='50' loading='lazy'itemprop="image" />			<cite class="comment-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">Hayden Sather</cite><br />
			<time class="comment-published" datetime="2019-09-14T14:36:01-04:00" title="Saturday, September 14, 2019, 2:36 pm" itemprop="datePublished">3 years ago</time>
			<a class="comment-permalink" href="https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/#comment-35378" itemprop="url">Permalink</a>
			 // <a itemprop="replyToUrl" rel='nofollow' class='comment-reply-link' href='https://fiz-ix.com/2012/11/low-power-arduino-using-the-watchdog-timer/?replytocom=35378#respond' data-commentid="35378" data-postid="541" data-belowelement="comment-35378" data-respondelement="respond" data-replyto="Reply to Hayden Sather" aria-label='Reply to Hayden Sather'>Reply</a>		</header><!-- .comment-meta -->

		<div class="comment-content" itemprop="text">
			<p>Hello Jeff,</p>
<p>This code works without an xbee shield on my Arduino Uno. But when I try to run it with shield on it, the section where it says // CODE TO BE EXECUTED PERIODICALLY is never hit. DO you have any idea what is wrong?</p>
		</div><!-- .comment-content -->

		
	</article>

</li><!-- .comment -->			</ol><!-- .comment-list -->

			
		</div><!-- #comments-->

	
	
		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2012/11/low-power-arduino-using-the-watchdog-timer/#respond" style="display:none;">Cancel reply</a></small></h3><form action="https://fiz-ix.com/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate><p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> <span class="required-field-message" aria-hidden="true">Required fields are marked <span class="required" aria-hidden="true">*</span></span></p><p class="comment-form-comment"><label for="comment">Comment <span class="required" aria-hidden="true">*</span></label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required" aria-hidden="true">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" required /></p>
<p class="comment-form-email"><label for="email">Email <span class="required" aria-hidden="true">*</span></label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" aria-describedby="email-notes" required /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200" /></p>
<p class="comment-form-cookies-consent"><input id="wp-comment-cookies-consent" name="wp-comment-cookies-consent" type="checkbox" value="yes" /> <label for="wp-comment-cookies-consent">Save my name, email, and website in this browser for the next time I comment.</label></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='541' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="8d7d84980d" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="193"/></p></form>	</div><!-- #respond -->
	
</section><!-- #comments-template -->
			
		

		</main><!-- #content -->
	


			

		</div><!-- #main -->
		
		

	<aside class="sidebar sidebar-primary" role="complementary" id="sidebar-primary" aria-label="Primary Sidebar" itemscope="itemscope" itemtype="http://schema.org/WPSideBar">

		
			<section id="text-4" class="widget widget_text">			<div class="textwidget">&nbsp;
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Fiz-ix Responsive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6753741789275748"
     data-ad-slot="8594677734"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
&nbsp;</div>
		</section><section id="categories-3" class="widget widget_categories"><h3 class="widget-title"><span>Categories</span></h3>
			<ul>
					<li class="cat-item cat-item-22"><a href="https://fiz-ix.com/category/guides/electronics/arduino/">Arduino</a>
</li>
	<li class="cat-item cat-item-41"><a href="https://fiz-ix.com/category/notebooks/art/">Art</a>
</li>
	<li class="cat-item cat-item-31"><a href="https://fiz-ix.com/category/guides/electronics/basics/">Basics</a>
</li>
	<li class="cat-item cat-item-4"><a href="https://fiz-ix.com/category/books/">Books</a>
</li>
	<li class="cat-item cat-item-36"><a href="https://fiz-ix.com/category/notebooks/calculators/">Calculators</a>
</li>
	<li class="cat-item cat-item-37"><a href="https://fiz-ix.com/category/notebooks/cartoons/">Cartoons</a>
</li>
	<li class="cat-item cat-item-26"><a href="https://fiz-ix.com/category/guides/diy/">DIY</a>
</li>
	<li class="cat-item cat-item-12"><a href="https://fiz-ix.com/category/guides/physics/dynamics/">Dynamics</a>
</li>
	<li class="cat-item cat-item-10"><a href="https://fiz-ix.com/category/guides/physics/electricity-and-magnetism/">Electricity and Magnetism</a>
</li>
	<li class="cat-item cat-item-66"><a href="https://fiz-ix.com/category/guides/electronics/">Electronics</a>
</li>
	<li class="cat-item cat-item-46"><a href="https://fiz-ix.com/category/notebooks/energy/">Energy</a>
</li>
	<li class="cat-item cat-item-13"><a href="https://fiz-ix.com/category/everyday-physics/">Everyday Physics</a>
</li>
	<li class="cat-item cat-item-35"><a href="https://fiz-ix.com/category/fun/">Fun</a>
</li>
	<li class="cat-item cat-item-3"><a href="https://fiz-ix.com/category/games/">Games</a>
</li>
	<li class="cat-item cat-item-7"><a href="https://fiz-ix.com/category/guides/">Guides</a>
</li>
	<li class="cat-item cat-item-1"><a href="https://fiz-ix.com/category/infographics/">Infographics</a>
</li>
	<li class="cat-item cat-item-43"><a href="https://fiz-ix.com/category/guides/programming/javascript/">Javascript</a>
</li>
	<li class="cat-item cat-item-9"><a href="https://fiz-ix.com/category/guides/physics/kinematics/">Kinematics</a>
</li>
	<li class="cat-item cat-item-23"><a href="https://fiz-ix.com/category/labs/">Labs</a>
</li>
	<li class="cat-item cat-item-20"><a href="https://fiz-ix.com/category/guides/programming/latex/">LaTeX</a>
</li>
	<li class="cat-item cat-item-18"><a href="https://fiz-ix.com/category/guides/programming/matlab/">MATLAB</a>
</li>
	<li class="cat-item cat-item-14"><a href="https://fiz-ix.com/category/guides/physics/mcat-preparation/">MCAT Preparation</a>
</li>
	<li class="cat-item cat-item-50"><a href="https://fiz-ix.com/category/guides/microsoft-office/">Microsoft Office</a>
</li>
	<li class="cat-item cat-item-32"><a href="https://fiz-ix.com/category/notebooks/">Notebooks</a>
</li>
	<li class="cat-item cat-item-79"><a href="https://fiz-ix.com/category/guides/programming/perl/">Perl</a>
</li>
	<li class="cat-item cat-item-17"><a href="https://fiz-ix.com/category/personal/">Personal</a>
</li>
	<li class="cat-item cat-item-30"><a href="https://fiz-ix.com/category/guides/diy/photovoltaics/">Photovoltaics</a>
</li>
	<li class="cat-item cat-item-24"><a href="https://fiz-ix.com/category/labs/physical-computing/">Physical Computing</a>
</li>
	<li class="cat-item cat-item-8"><a href="https://fiz-ix.com/category/guides/physics/">Physics</a>
</li>
	<li class="cat-item cat-item-33"><a href="https://fiz-ix.com/category/notebooks/physics-concepts/">Physics Concepts</a>
</li>
	<li class="cat-item cat-item-47"><a href="https://fiz-ix.com/category/labs/physics-labs/">Physics Labs</a>
</li>
	<li class="cat-item cat-item-16"><a href="https://fiz-ix.com/category/guides/physics/physics-tips/">Physics Tips</a>
</li>
	<li class="cat-item cat-item-25"><a href="https://fiz-ix.com/category/guides/programming/processing/">Processing</a>
</li>
	<li class="cat-item cat-item-64"><a href="https://fiz-ix.com/category/guides/programming/">Programming</a>
</li>
	<li class="cat-item cat-item-40"><a href="https://fiz-ix.com/category/notebooks/reviews/">Reviews</a>
</li>
	<li class="cat-item cat-item-39"><a href="https://fiz-ix.com/category/guides/programming/shell/">Shell</a>
</li>
	<li class="cat-item cat-item-5"><a href="https://fiz-ix.com/category/simulations/">Simulations</a>
</li>
	<li class="cat-item cat-item-34"><a href="https://fiz-ix.com/category/guides/ubuntu/">Ubuntu</a>
</li>
			</ul>

			</section><section id="linkcat-6" class="widget widget_links"><h3 class="widget-title"><span>Links</span></h3>
	<ul class='xoxo blogroll'>
<li><a href="http://www.makezine.com" rel="noopener" title="A Publication for Tinkerers" target="_blank">MAKE Magazine</a></li>
<li><a href="http://www.sparkfun.com" rel="noopener" title="Online Electronics Retail Store" target="_blank">SparkFun</a></li>
<li><a href="http://www.tindie.com">tindie</a></li>
<li><a href="http://www.xkcd.com" rel="noopener" title="A Math and Science Webcomic" target="_blank">xkcd</a></li>

	</ul>
</section>

		
	</aside><!-- #sidebar-primary -->

		
	</div> <!--#main-containter -->
		
		</div><!-- #container -->
		<nav id="footer-navigation"> </nav>
		<footer id="footer" class="site-footer" role="contentinfo" itemscope="itemscope" itemtype="http://schema.org/WPFooter">
		
			<p class="credit">
				Copyright &#169; 2022 <a class="site-link" href="https://fiz-ix.com" rel="home">Fiz-ix</a>. Powered by <a class="wp-link" target="_blank" href="http://wordpress.org">WordPress</a> and <a class="theme-link" target="_blank" href="http://fireincome.com/drop-shipping">Drop Shipping</a>.			</p><!-- .credit -->

		</footer><!-- #footer -->

	

	<script type='text/javascript' src='https://fiz-ix.com/wp-content/themes/drop-shipping/library/js/mobile-toggle.min.js?ver=20130528' id='hybrid-mobile-toggle-js'></script>
<script async="async" type='text/javascript' src='https://fiz-ix.com/wp-content/plugins/akismet/_inc/form.js?ver=4.0.1' id='akismet-form-js'></script>

</body>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2398397-5', 'auto');
  ga('send', 'pageview');

</script>

</html>